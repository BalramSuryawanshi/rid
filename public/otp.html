<!DOCTYPE html>
<html>
<head>
    <title>OTP in JS</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="form">
        <h1>OTP Using JavaScript</h1>
        <input type="email" id="email" placeholder="Enter Email...">
        <div class="otpverify">
            <input type="text" id="otp_inp" placeholder="Enter the OTP sent to your Email...">
            <button class="btn" id="otp-btn" onclick="verifyOTP()">Verify</button>
        </div>
        <button class="btn" onclick="sendOTP()">Send OTP</button>
    </div>
   


    <script>
       async function sendOTP() {
    const email = document.getElementById('email').value;
    if (!email) {
        alert('Please enter your email');
        return;
    }

    try {
        const response = await fetch('/send-otp', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ email })
        });

        if (!response.ok) {
            throw new Error('Network response was not ok ' + response.statusText);
        }

        const message = await response.text();
        alert(message);
    } catch (error) {
        console.error('Error sending OTP:', error);
        alert('Failed to send OTP: ' + error.message);
    }
}

async function verifyOTP() {
    const otp = document.getElementById('otp_inp').value;
    if (!otp) {
        alert('Please enter the OTP');
        return;
    }

    try {
        const response = await fetch('/verify-otp', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ otp })
        });

        if (!response.ok) {
            throw new Error('Network response was not ok ' + response.statusText);
        }

        const message = await response.text();
        alert(message);
    } catch (error) {
        console.error('Error verifying OTP:', error);
        alert('Failed to verify OTP: ' + error.message);
    }
}

        
    </script>
</body>
</html>
